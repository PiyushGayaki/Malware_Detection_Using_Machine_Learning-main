import os
import sys
import tempfile
import streamlit as st
import time
from file_checker import checkFile

st.title("Malware File Checker")
st.write("This program checks if a given file is probable malware or not.")

uploaded_file = st.file_uploader("Upload a file")  # Specify the allowed file type(s) here

if uploaded_file is not None:
    # Save the uploaded file to a temporary file on disk
    temp_file = tempfile.NamedTemporaryFile(delete=False)
    temp_file.write(uploaded_file.read())
    temp_file.close()
    
    # Check if the temporary file is probable malware or not
    legitimate = checkFile(temp_file.name)
    if legitimate:
        st.success("The uploaded file seems legitimate!")
    else:
        st.error("The uploaded file is probably a MALWARE!!!")
     
    # Wait for a few seconds before deleting the temporary file
#     time.sleep(200000)
#     os.unlink(temp_file.name)
else:
    st.warning("Please enter a valid file path.")

